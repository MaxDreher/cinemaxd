{% extends 'watchlist/base.html' %}
{% load static %}
{% load custom_filters %}

{# Additional CSS Block #}
{% block css %}
    <link rel="stylesheet" href="{% static 'watchlist/css/dashboard.css' %}">
{% endblock %}

{# Additional JS Block #}
{% block js %}
    {# External Libraries #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.45.0/apexcharts.min.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/map.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>    
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/wc.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

    {# Custom Scripts #}
    <script src="{% static 'watchlist/js/dashboard.js' %}"></script>

    {# Chart Inclusions #}
    {% include "./charts/heatmap.html" %}
    {% include "./charts/movperyear.html" %}
    {% include "./charts/weekdays.html" %}
    {% include "./charts/ratings.html" %}
    {% include "./charts/tagcloud.html" %}
    {% include "./charts/globe.html" %}
{% endblock %}

{# Content Block #}
{% block content %}
<div class="container-fluid">
    <div class="row mt-0 g-3">
        {# Left Column (Last Seen, W-M-Y-All Tabs) #}
        <div class="col-md-4">
            <div class="row g-3 mb-3">
                {# Last Seen #}
                    {% with movie=newest %}
                        <div class="col-md-12">
                            <div class="card border border-0 rounded-4 shadow">
                                <div class="row g-0">
                                    {# Poster #}
                                        <div class="col-md-4">
                                            <img src="{{ movie.posterLink }}" class="img-fluid border border-1 border-end-0 shadow-lg rounded-start-4 h-100" alt="{{ movie.title }} Poster">
                                        </div>
                                    {# Body #}
                                    <div class="col-md-8 d-flex flex-column">
                                        <div class="card-body p-0" style="position: relative;">
                                            {# Gradient Overlay #}
                                            <div class="gradient-overlay rounded-end-4 border border-1 border-start-0 position-absolute top-0 start-0 w-100 ">
                                                <span class="p-3 position-absolute">
                                                    {# Date Seen Sub-Heading #}
                                                        {% if movie.date %}
                                                            {% include "./elements/small-header.html" with text=movie.date icon="bi-film" %}
                                                        {% endif %}
                                                    {# Title Block #}
                                                        {% include "./elements/movie-title.html" with movie=movie size="h4" %}
                                                    {# Tagline #}
                                                        {% if movie.tagline %}
                                                            <small class="text-body-tertiary d-block mb-1"><i>"{{ movie.tagline }}"</i></small>
                                                        {% endif %}
                                                    {# Badges #}
                                                        {% if movie.service %}
                                                            <img class="align-top border border-3 border-tertiary rounded-4 shadow-lg" src="/static/watchlist/images/{{ movie.service|striptags }}.png" height="28px">
                                                        {% endif %}
                                                        {% include "./elements/badge-secondary.html" with text='<i class="bi bi-check-lg"></i>' color="green" %}
                                                        {% include "./elements/badge-secondary.html" with text=movie.rating|convert_to_stars %}
                                                        {% if movie.runtime %}
                                                            {% include "./elements/badge-secondary.html" with text=movie.runtime|convert_to_hrs %}
                                                        {% else %}
                                                            {% include "./elements/badge-secondary.html" with text=movie.episodes|convert_to_eps %}
                                                        {% endif %}
                                                        {% include "./elements/badge-secondary.html" with text=movie.avg_critical_rating|convert_to_rating color="dark" %}
                                                        {% if movie.movieaward_set.all %}
                                                            {% include "./elements/oscar-badge.html" with text=movie.movieaward_set.all|parse_oscar num=movie.movieaward_set.all|length icon="bi-trophy" color="gold"%}
                                                        {% endif %}            
                                                    <hr class="my-1">
                                                    {# Plot #}
                                                        <p class="card-text mb-0"><small class="text-body-secondary">{{ movie.plot }}</small></p>
                                                </span>
                                            </div>
                                            {# Background Image #}
                                                <img src="{{ movie.bgLink }}" class="img-fluid border border-1 border-start-0 rounded-end-4 bg-image" alt="Background Image" style="object-fit: cover;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endwith %}
                {# /Last Seen #}

                {# W-M-Y Tabs #}
                <div class="col-md-12">
                    <div class="card shadow">
                        <div class="card-header">
                            <ul class="nav nav-tabs nav-fill card-header-tabs nav-fill roboto fw-semibold p-0" id="myTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="small nav-link data-tabs active" id="week-tab" data-bs-toggle="tab" data-bs-target="#week-tab-pane" type="button" role="tab">
                                        <i class="bi bi-calendar3-week"></i>
                                        WEEK
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="small nav-link data-tabs" id="month-tab" data-bs-toggle="tab" data-bs-target="#month-tab-pane" type="button" role="tab">
                                        <i class="bi bi-calendar3"></i>
                                        MONTH
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="small nav-link data-tabs" id="year-tab" data-bs-toggle="tab" data-bs-target="#year-tab-pane" type="button" role="tab">
                                        <i class="bi bi-calendar3-fill"></i>
                                        YEAR
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="small nav-link data-tabs" id="disabled-tab" data-bs-toggle="tab" data-bs-target="#disabled-tab-pane" type="button" role="tab" disabled>
                                        <i class="bi bi-infinity"></i>
                                        LIFETIME
                                    </button>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="myTabContent">
                                {# Week Tab #}
                                {% include "./elements/tab.html" with data=week active="active show" %}
                                {% comment %} MONTH TAB {% endcomment %}
                                {% include "./elements/tab.html" with data=month %}
                                {% comment %} YEAR TAB {% endcomment %}
                                {% include "./elements/tab.html" with data=year %}
                                <div class="tab-pane fade" id="disabled-tab-pane" role="tabpanel" tabindex="0">...</div>
                            </div>                          
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="row g-3 mb-3">
                <div class="col-md-12">
                    <div class="card rounded-4 shadow">
                        <small class="text-body-tertiary ms-3 mt-2">
                            <i class="bi bi-broadcast-pin"></i>
                            Movies Watched by Year of Release
                        </small>
                        <div id="movPerYear-container" class="card-body px-2 pt-1 pb-0">
                            <div id="movPerYear">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-12">
                    {% include "./onThisDay.html" with random=random %}
                </div>
            </div>
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="row g-3 mb-3">
                        <div class="col-md-6">
                            <div class="card shadow">
                                <div class="card-body text-center py-2 px-2">
                                    <small class="text-body-tertiary roboto">    
                                        <i class="bi bi-fire"></i>
                                        Current Streak
                                    </small>
                                    <div class="row my-1">
                                        <div class="col-md-12">
                                            <span>
                                                <b class="h4 big-number-card">
                                                    {% if streak.current == 0 %}
                                                        <i class="bi bi-fire text-body-secondary"></i>
                                                    {% else %}
                                                        <i class="bi bi-fire glow text-body-green"></i>
                                                    {% endif %}
                                                    {{ streak.current }}
                                                </b>
                                                <small class="h5 fw-semibold text-body-tertiary">days</small>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card shadow">
                                <div class="card-body text-center py-2 px-2">
                                    <small class="text-body-tertiary roboto">    
                                        <i class="bi bi-fire"></i>
                                        Longest Streak
                                    </small>
                                    <div class="row my-1">
                                        <div class="col-md-12">
                                            <span>
                                                <b class="h4 big-number-card">
                                                    {% if streak.longest == streak.current %}
                                                        <i class="bi bi-fire glow text-body-green"></i>
                                                    {% else %}
                                                        <i class="bi bi-fire text-body-secondary"></i>
                                                    {% endif %}
                                                    {{ streak.longest }}
                                                </b>
                                                <small class="h5 fw-semibold text-body-tertiary">days</small>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>    
                    </div>
                    <div class="card shadow mb-3 w-100">
                        <small class="text-body-tertiary ms-3 my-2">
                            <i class="bi bi-calendar3-event"></i>
                            Movies Watched by Day
                        </small>
                        <div id="heatmap-container" class="card-body px-3 pb-3">
                            <div id="heatmap">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 d-flex align-items-stretch" height="100%">
                    <div class="row g-0">
                        <div class="card shadow mb-3 w-100 flex-grow-1" height="50%">
                            <small class="text-body-tertiary ms-3 mt-2">
                                <i class="bi bi-bookmark-star"></i>
                                Movies Rating Distribution
                            </small>
                            <div id="ratingsChart-container" class="card-body px-3 pb-3 pt-0">
                                <div id="ratingsChart">
                                </div>
                            </div>
                        </div>
                        <div class="card shadow mb-3 w-100 flex-grow-1" height="50%">
                            <small class="text-body-tertiary ms-3 my-2">
                                <i class="bi bi-calendar-day"></i>
                                Movies by Weekday
                            </small>
                            <div id="weekday-container" class="card-body px-3 pb-3 pt-0">
                                <div id="weekdayCount">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> 
            <div class="row g-3 mb-3">
                <div class="col-md-5 align-items-stretch">
                    <div class="card shadow mb-3 w-100 flex-grow-1">
                        <small class="text-body-tertiary ms-3 my-2">
                            <i class="bi bi-tags-fill"></i>
                            Tag Cloud
                        </small>
                        <div id="tagcloud-container" class="card-body px-0 pb-3 pt-0">
                            <div id="tagcloud">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-7">
                    <div class="card shadow mb-3 w-100">
                        <small class="text-body-tertiary ms-3 my-2">
                            <i class="bi bi-globe-americas"></i>
                            Global Distribution
                        </small>
                        <div id="globe-container" class="card-body px-0 pb-3 pt-0">
                            <div id="globe">
                            </div>
                        </div>
                    </div>
                </div>
            </div>           
        </div>
        <div class="col-md-4">
            <div class="row g-0 mb-3">
                <div class="card shadow">
                    <button id="randomButton" class="z-3 btn btn-sm text-bg-secondary position-absolute top-0 end-0 m-3" type="button">
                        <i class="bi bi-shuffle"></i>
                    </button>
                    <div id="randomCarousel" class="carousel slide">
                        <div class="carousel-indicators">
                            {% for movie in random %}
                                <button type="button" data-bs-target="#randomCarousel" data-bs-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active"{% endif %}></button>
                            {% endfor %}
                        </div>
                        <div id="randomElements" class="carousel-inner">
                            {% include "./randomMovies.html" with random=random %}
                        </div>
                    </div>
                    <button class="carousel-control-prev week-button" type="button" data-bs-target="#randomCarousel" data-bs-slide="prev">
                    </button>
                    <button class="carousel-control-next week-button" type="button" data-bs-target="#randomCarousel" data-bs-slide="next">
                    </button>    
                </div>
            </div>
            <div class="row g-3">
                <div class="col-md-12">
                    <div class="card shadow">
                        <div class="card-header">
                            <ul class="nav nav-tabs nav-fill card-header-tabs nav-fill roboto fw-semibold p-0" id="myTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="small nav-link data-tabs active" id="actors-tab" data-bs-toggle="tab" data-bs-target="#actors-tab-pane" type="button" role="tab">
                                        <i class="bi bi-person-video"></i>
                                        ACTORS
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="small nav-link data-tabs" id="directors-tab" data-bs-toggle="tab" data-bs-target="#directors-tab-pane" type="button" role="tab">
                                        <i class="bi bi-person-video2"></i>
                                        DIRECTORS
                                    </button>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content">
                            {% comment %} ACTORS {% endcomment %}
                            <div class="tab-pane fade show active" id="actors-tab-pane" role="tabpanel" tabindex="0">
                                <div class="card-body px-3 pt-0 pb-3 mb-0" role="presentation">
                                    <ul class="nav nav-justified nav-pills roboto fw-semibold mt-3">
                                        <li class="nav-item mx-2">
                                            <button class="small nav-link active" id="bestActors-tab" data-bs-toggle="tab" data-bs-target="#bestActors-tab-pane" type="button" role="tab">
                                                <i class="bi bi-arrow-up"></i>
                                                BEST
                                            </button>
                                        </li>
                                        <li class="nav-item mx-1" role="presentation">
                                            <button class="small nav-link" id="worstActors-tab" data-bs-toggle="tab" data-bs-target="#worstActors-tab-pane" type="button" role="tab">
                                                <i class="bi bi-arrow-down"></i>
                                                WORST
                                            </button>
                                        </li>  
                                        <li class="nav-item mx-1" role="presentation">
                                            <button class="small nav-link" id="mostWatchedActors-tab" data-bs-toggle="tab" data-bs-target="#mostWatchedActors-tab-pane" type="button" role="tab">
                                                <i class="bi bi-eye-fill"></i>
                                                MOST WATCHED
                                            </button>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        {% comment %} BEST TAB {% endcomment %}
                                        <div class="tab-pane fade show active" id="bestActors-tab-pane" role="tabpanel" tabindex="0">
                                            <div class="row row-cols-1 g-2 mt-3 mb-2">
                                                {% for item in actors.best_by_rating%}
                                                    <div class="col">
                                                        <div class="card border-dark shadow">
                                                            <div class="row g-0">
                                                                <div class="col-md-1 shadow-lg">
                                                                    <img src="https://image.tmdb.org/t/p/original{{ item.actor.imgLink }}" class="img-fluid shadow rounded-start portrait-lg" alt="{{ item.actor.name }} Poster">
                                                                </div>
                                                                <div class="col-md-11 d-flex flex-column">
                                                                    <div class="card-body p-0" style="position: relative;">
                                                                        <div class="gradient-overlay-half rounded-end position-absolute top-0 start-0 w-100 ">
                                                                            <span class="px-2 py-2 position-absolute">
                                                                                <p class="card-title mb-0">
                                                                                    <span class="h6 title">
                                                                                        <span>
                                                                                            {% if forloop.first %}
                                                                                                <small class="text-body-green roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% else %}
                                                                                                <small class="text-body-tertiary roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% endif %}
                                                                                        </span>        
                                                                                        <a class="actor-name" data-actor-id="{{item.actor.TMDB_ID}}" href="#{{item.actor.TMDB_ID}}" role="button"><b>{{ item.actor.name }}</b></a>
                                                                                    </span>
                                                                                    &nbsp;
                                                                                    <small class="align-top">
                                                                                        <span class="badge rounded-pill text-bg-secondary">★ {{ item.actor.avg_rating }} Avg.</span>
                                                                                        <span class="badge rounded-pill text-bg-secondary">{{ item.actor.nonnull_count }} Appearances</span>
                                                                                    </small>
                                                                                </p>
                                                                                <span class="text-body-tertiary">
                                                                                    <small class="align-top">
                                                                                        <i class="bi bi-film"></i>
                                                                                        {{ item.movie.title }} ({{ item.movie.year }}) ★ {{ item.movie.rating }}
                                                                                    </small>
                                                                                <span>

                                                                            </span>
                                                                        </div>
                                                                        <img src="{{ item.movie.bgLink }}" class="img-fluid rounded-end bg-image-actor" alt="Background Image" style="object-fit: cover;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                        {% comment %} WORST TAB {% endcomment %}
                                        <div class="tab-pane fade" id="worstActors-tab-pane" role="tabpanel" tabindex="0">
                                            <div class="row row-cols-1 g-2 mt-3 mb-2">
                                                {% for item in actors.worst_by_rating%}
                                                    <div class="col">
                                                        <div class="card border-dark shadow">
                                                            <div class="row g-0">
                                                                <div class="col-md-1 shadow-lg">
                                                                    <img src="https://image.tmdb.org/t/p/original{{ item.actor.imgLink }}" class="img-fluid shadow rounded-start portrait-lg" alt="{{ item.actor.name }} Poster">
                                                                </div>
                                                                <div class="col-md-11 d-flex flex-column">
                                                                    <div class="card-body p-0" style="position: relative;">
                                                                        <div class="gradient-overlay-half rounded-end position-absolute top-0 start-0 w-100 ">
                                                                            <span class="px-2 py-1 position-absolute">
                                                                                <p class="card-title mb-0">
                                                                                    <span class="h6 title">
                                                                                        <span>
                                                                                            {% if forloop.first %}
                                                                                                <small class="text-body-red roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% else %}
                                                                                                <small class="text-body-tertiary roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% endif %}
                                                                                        </span>        
                                                                                        <a class="actor-name" data-actor-id="{{item.actor.TMDB_ID}}" href="#{{item.actor.TMDB_ID}}" role="button"><b>{{ item.actor.name }}</b></a>
                                                                                    </span>
                                                                                    &nbsp;
                                                                                    <small class="align-top">
                                                                                        <span class="badge rounded-pill text-bg-secondary">★ {{ item.actor.avg_rating }} Avg.</span>
                                                                                        <span class="badge rounded-pill text-bg-secondary">{{ item.actor.nonnull_count }} Appearances</span>
                                                                                    </small>
                                                                                </p>
                                                                                <span class="text-body-tertiary">
                                                                                    <small class="align-top">
                                                                                        <i class="bi bi-film"></i>
                                                                                        {{ item.movie.title }} ({{ item.movie.year }}) ★ {{ item.movie.rating }}
                                                                                    </small>
                                                                                <span>

                                                                            </span>
                                                                        </div>
                                                                        <img src="{{ item.movie.bgLink }}" class="img-fluid rounded-end bg-image-actor" alt="Background Image" style="object-fit: cover;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>  
                                        </div>
                                        {% comment %} MOST WATCHED TAB {% endcomment %}
                                        <div class="tab-pane fade" id="mostWatchedActors-tab-pane" role="tabpanel" tabindex="0">
                                            <div class="row row-cols-1 g-2 mt-3 mb-2">
                                                {% for item in actors.by_count%}
                                                    <div class="col">
                                                        <div class="card border-dark shadow">
                                                            <div class="row g-0">
                                                                <div class="col-md-1 shadow-lg">
                                                                    <img src="https://image.tmdb.org/t/p/original{{ item.actor.imgLink }}" class="img-fluid shadow rounded-start portrait-lg" alt="{{ item.actor.name }} Poster">
                                                                </div>
                                                                <div class="col-md-11 d-flex flex-column">
                                                                    <div class="card-body p-0" style="position: relative;">
                                                                        <div class="gradient-overlay-half rounded-end position-absolute top-0 start-0 w-100 ">
                                                                            <span class="px-2 py-1 position-absolute">
                                                                                <p class="card-title mb-0">
                                                                                    <span class="h6 title">
                                                                                        <span>
                                                                                            {% if forloop.first %}
                                                                                                <small class="text-body-green roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% else %}
                                                                                                <small class="text-body-tertiary roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% endif %}
                                                                                        </span>        
                                                                                        <a class="actor-name" data-actor-id="{{item.actor.TMDB_ID}}" href="#{{item.actor.TMDB_ID}}" role="button"><b>{{ item.actor.name }}</b></a>
                                                                                    </span>
                                                                                    &nbsp;
                                                                                    <small class="align-top">
                                                                                        <span class="badge rounded-pill text-bg-secondary">★ {{ item.actor.avg_rating }} Avg.</span>
                                                                                        <span class="badge rounded-pill text-bg-secondary">{{ item.actor.movie_count }} Appearances</span>
                                                                                    </small>
                                                                                </p>
                                                                                <span class="text-body-tertiary">
                                                                                    <small class="align-top">
                                                                                        <i class="bi bi-film"></i>
                                                                                        {{ item.movie.title }} ({{ item.movie.year }}) ★ {{ item.movie.rating }}
                                                                                    </small>
                                                                                <span>

                                                                            </span>
                                                                        </div>
                                                                        <img src="{{ item.movie.bgLink }}" class="img-fluid rounded-end bg-image-actor" alt="Background Image" style="object-fit: cover;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>  
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% comment %} DIRECTORS {% endcomment %}
                            <div class="tab-pane fade" id="directors-tab-pane" role="tabpanel" tabindex="0">
                                <div class="card-body px-3 pt-0 pb-3 mb-0" role="presentation">
                                    <ul class="nav nav-justified nav-pills roboto fw-semibold mt-3">
                                        <li class="nav-item mx-2">
                                            <button class="small nav-link active" id="bestActors-tab" data-bs-toggle="tab" data-bs-target="#bestDirectors-tab-pane" type="button" role="tab">
                                                <i class="bi bi-arrow-up"></i>
                                                BEST
                                            </button>
                                        </li>
                                        <li class="nav-item mx-1" role="presentation">
                                            <button class="small nav-link" id="worstActors-tab" data-bs-toggle="tab" data-bs-target="#worstDirectors-tab-pane" type="button" role="tab">
                                                <i class="bi bi-arrow-down"></i>
                                                WORST
                                            </button>
                                        </li>  
                                        <li class="nav-item mx-1" role="presentation">
                                            <button class="small nav-link" id="mostWatchedActors-tab" data-bs-toggle="tab" data-bs-target="#mostWatchedDirectors-tab-pane" type="button" role="tab">
                                                <i class="bi bi-eye-fill"></i>
                                                MOST WATCHED
                                            </button>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        {% comment %} BEST TAB {% endcomment %}
                                        <div class="tab-pane fade show active" id="bestDirectors-tab-pane" role="tabpanel" tabindex="0">
                                            <div class="row row-cols-1 g-2 mt-3 mb-2">
                                                {% for item in directors.best_by_rating%}
                                                    <div class="col">
                                                        <div class="card border-dark shadow">
                                                            <div class="row g-0">
                                                                <div class="col-md-1 shadow-lg">
                                                                    <img src="https://image.tmdb.org/t/p/original{{ item.director.imgLink }}" class="img-fluid shadow rounded-start portrait-lg" alt="{{ item.director.name }} Poster">
                                                                </div>
                                                                <div class="col-md-11 d-flex flex-column">
                                                                    <div class="card-body p-0" style="position: relative;">
                                                                        <div class="gradient-overlay-half rounded-end position-absolute top-0 start-0 w-100 ">
                                                                            <span class="px-2 py-1 position-absolute">
                                                                                <p class="card-title mb-0">
                                                                                    <span class="h6 title">
                                                                                        <span>
                                                                                            {% if forloop.first %}
                                                                                                <small class="text-body-green roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% else %}
                                                                                                <small class="text-body-tertiary roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% endif %}
                                                                                        </span>        
                                                                                        <a class="director-name" data-actor-id="{{item.director.TMDB_ID}}" href="#{{item.director.TMDB_ID}}" role="button"><b>{{ item.director.name }}</b></a>
                                                                                    </span>
                                                                                    &nbsp;
                                                                                    <small class="align-top">
                                                                                        <span class="badge rounded-pill text-bg-secondary">★ {{ item.director.avg_rating }} Avg.</span>
                                                                                        <span class="badge rounded-pill text-bg-secondary">{{ item.director.nonnull_count }} Films</span>
                                                                                    </small>
                                                                                </p>
                                                                                <span class="text-body-tertiary">
                                                                                    <small class="align-top">
                                                                                        <i class="bi bi-film"></i>
                                                                                        {{ item.movie.title }} ({{ item.movie.year }}) ★ {{ item.movie.rating }}
                                                                                    </small>
                                                                                <span>

                                                                            </span>
                                                                        </div>
                                                                        <img src="{{ item.movie.bgLink }}" class="img-fluid rounded-end bg-image-actor" alt="Background Image" style="object-fit: cover;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                        {% comment %} WORST TAB {% endcomment %}
                                        <div class="tab-pane fade" id="worstDirectors-tab-pane" role="tabpanel" tabindex="0">
                                            <div class="row row-cols-1 g-2 mt-3 mb-2">
                                                {% for item in directors.worst_by_rating%}
                                                    <div class="col">
                                                        <div class="card border-dark shadow">
                                                            <div class="row g-0">
                                                                <div class="col-md-1 shadow-lg">
                                                                    <img src="https://image.tmdb.org/t/p/original{{ item.director.imgLink }}" class="img-fluid shadow rounded-start portrait-lg" alt="{{ item.director.name }} Poster">
                                                                </div>
                                                                <div class="col-md-11 d-flex flex-column">
                                                                    <div class="card-body p-0" style="position: relative;">
                                                                        <div class="gradient-overlay-half rounded-end position-absolute top-0 start-0 w-100 ">
                                                                            <span class="px-2 py-1 position-absolute">
                                                                                <p class="card-title mb-0">
                                                                                    <span class="h6 title">
                                                                                        <span>
                                                                                            {% if forloop.first %}
                                                                                                <small class="text-body-red roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% else %}
                                                                                                <small class="text-body-tertiary roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% endif %}
                                                                                        </span>        
                                                                                        <a class="director-name" data-director-id="{{item.director.TMDB_ID}}" href="#{{item.director.TMDB_ID}}" role="button"><b>{{ item.director.name }}</b></a>
                                                                                    </span>
                                                                                    &nbsp;
                                                                                    <small class="align-top">
                                                                                        <span class="badge rounded-pill text-bg-secondary">★ {{ item.director.avg_rating }} Avg.</span>
                                                                                        <span class="badge rounded-pill text-bg-secondary">{{ item.director.nonnull_count }} Films</span>
                                                                                    </small>
                                                                                </p>
                                                                                <span class="text-body-tertiary">
                                                                                    <small class="align-top">
                                                                                        <i class="bi bi-film"></i>
                                                                                        {{ item.movie.title }} ({{ item.movie.year }}) ★ {{ item.movie.rating }}
                                                                                    </small>
                                                                                <span>

                                                                            </span>
                                                                        </div>
                                                                        <img src="{{ item.movie.bgLink }}" class="img-fluid rounded-end bg-image-actor" alt="Background Image" style="object-fit: cover;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>  
                                        </div>
                                        {% comment %} MOST WATCHED TAB {% endcomment %}
                                        <div class="tab-pane fade" id="mostWatchedDirectors-tab-pane" role="tabpanel" tabindex="0">
                                            <div class="row row-cols-1 g-2 mt-3 mb-2">
                                                {% for item in directors.by_count%}
                                                    <div class="col">
                                                        <div class="card border-dark shadow">
                                                            <div class="row g-0">
                                                                <div class="col-md-1 shadow-lg">
                                                                    <img src="https://image.tmdb.org/t/p/original{{ item.director.imgLink }}" class="img-fluid shadow rounded-start portrait-lg" alt="{{ item.director.name }} Poster">
                                                                </div>
                                                                <div class="col-md-11 d-flex flex-column">
                                                                    <div class="card-body p-0" style="position: relative;">
                                                                        <div class="gradient-overlay-half rounded-end position-absolute top-0 start-0 w-100 ">
                                                                            <span class="px-2 py-1 position-absolute">
                                                                                <p class="card-title mb-0">
                                                                                    <span class="h6 title">
                                                                                        <span>
                                                                                            {% if forloop.first %}
                                                                                                <small class="text-body-green roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% else %}
                                                                                                <small class="text-body-tertiary roboto py-0">    
                                                                                                    #{{ forloop.counter }}
                                                                                                </small>
                                                                                            {% endif %}
                                                                                        </span>        
                                                                                        <a class="director-name" data-director-id="{{item.director.TMDB_ID}}" href="#{{item.director.TMDB_ID}}" role="button"><b>{{ item.director.name }}</b></a>
                                                                                    </span>
                                                                                    &nbsp;
                                                                                    <small class="align-top">
                                                                                        <span class="badge rounded-pill text-bg-secondary">★ {{ item.director.avg_rating }} Avg.</span>
                                                                                        <span class="badge rounded-pill text-bg-secondary">{{ item.director.movie_count }} Films</span>
                                                                                    </small>
                                                                                </p>
                                                                                <span class="text-body-tertiary">
                                                                                    <small class="align-top">
                                                                                        <i class="bi bi-film"></i>
                                                                                        {{ item.movie.title }} ({{ item.movie.year }}) ★ {{ item.movie.rating }}
                                                                                    </small>
                                                                                <span>

                                                                            </span>
                                                                        </div>
                                                                        <img src="{{ item.movie.bgLink }}" class="img-fluid rounded-end bg-image-actor" alt="Background Image" style="object-fit: cover;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endfor %}
                                            </div>  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
