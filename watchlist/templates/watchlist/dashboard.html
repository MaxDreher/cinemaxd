{% extends 'watchlist/base.html' %}
{% load static %}
{% load custom_filters %}

{% block css %}
    <link rel="stylesheet" href="{% static 'watchlist/css/dashboard.css' %}">
{% endblock %}
{% block js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.45.0/apexcharts.min.js"></script>
    <script src="{% static 'watchlist/js/dashboard.js' %}"></script>

    {% include "./charts/heatmap.html" %}
    {% include "./charts/movperyear.html" %}
    {% include "./charts/actors.html" %}
    {% include "./charts/directors.html" %}
{% endblock %}

{% block content %}
<div class="row mx-3 mt-3">
    <div class="col-md-2 chart-bg">
        <b class="section-heading">LATEST</b>
        <div class="row mt-2">
            <div class="col-md-2 text-center">
                <img class="poster shadow-lg" src="{{ newest.posterLink }}" height="60px">
            </div>
            <div class="col-md-10">
                <div class="fw-bold sidebar-title">
                    {{ newest.title }} <b class="year">{{ newest.year }}</b>
                </div>
                <span class="little-stars">
                    {{ newest.rating|convert_to_stars }}
                </span>
                <span class="year">
                    &nbsp;&nbsp;&nbsp;{{ newest.date }}
                </span>
            </div>
        </div>
        <div class="row mt-4">
            <b class="section-heading">TOP THIS WEEK</b>
            <div class="row mt-2">
                <div class="col-md-2 text-center">
                    <img class="poster shadow-lg" src="{{ top_this_week.posterLink }}" height="60px">
                </div>
                <div class="col-md-10">
                    <div class="fw-bold sidebar-title">
                        {{ top_this_week.title }} <b class="year">{{ top_this_week.year }}</b>
                    </div>
                    <span class="little-stars">
                        {{ top_this_week.rating|convert_to_stars }}
                    </span>
                    <span class="year">
                        &nbsp;&nbsp;&nbsp;{{ top_this_week.date }}
                    </span>
                    </div>
            </div>
        </div>
        <div class="row mt-4">
            <b class="section-heading">TOP THIS MONTH</b>
            <div class="row mt-2">
                <div class="col-md-2 text-center">
                    <img class="poster shadow-lg" src="{{ top_this_month.posterLink }}" height="60px">
                </div>
                <div class="col-md-10">
                    <div class="fw-bold sidebar-title">
                        {{ top_this_month.title }} <b class="year">{{ top_this_month.year }}</b>
                    </div>
                    <span class="little-stars">
                        {{ top_this_month.rating|convert_to_stars }}
                    </span>
                    <span class="year">
                        &nbsp;&nbsp;&nbsp;{{ top_this_month.date }}
                    </span>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <b class="section-heading">LAST 5â˜…</b>
            <div class="row mt-2">
                <div class="col-md-2 text-center">
                    <img class="poster shadow-lg" src="{{ last_5.posterLink }}" height="60px">
                </div>
                <div class="col-md-10">
                    <div class="fw-bold sidebar-title">
                        {{ last_5.title }} <b class="year">{{ last_5.year }}</b>
                    </div>
                    <span class="little-stars">
                        {{ last_5.rating|convert_to_stars }}
                    </span>
                    <span class="year">
                        &nbsp;&nbsp;&nbsp;{{ last_5.date }}
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div id="chart" class="chart-bg">
        </div>
        <div id="heatmap" class="chart-bg mt-3">
        </div>
    </div>
    <div class="col-md-2 chart-bg">
        <b class="section-heading">RANDOM SELECTIONS</b>
        {% for randy in random %}
        <div class="row mt-3">
            <div class="col-md-2 text-center">
                <img class="poster shadow-lg" src="{{ randy.posterLink }}" height="60px">
            </div>
            <div class="col-md-7">
                <div class="fw-bold sidebar-title">
                    {{ randy.title }} <b class="year">{{ randy.year }}</b>
                </div>
            </div>
            <div class="col-md-3 text-center">
                <img class="poster" src="/static/watchlist/images/{{ randy.provider.last.name|striptags }}.png" height="50px">
            </div>
        </div>
        {% endfor %}
        <div class="row mt-3 mx-1">
            <button class="btn btn-secondary" type="submit">Randomize Selections</button>
            {% comment %} <a class="btn btn-secondary" data-bs-toggle="collapse" data-bs-target="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                Show/Hide Add to Watchlist
            </a>
            <div class="collapse" id="collapseExample">
                None
            </div> {% endcomment %}
        </div>
    </div>
    <div class="col-md-2">
        <div id="actors" class="chart-bg">
        </div>
    </div>
    <div class="col-md-2">
        <div id="directors" class="chart-bg">
        </div>
    </div>
</div>
<div class="row mx-3 mt-3">
    <div class="col-md-2 chart-bg">
        <b class="section-heading">TOP ACTORS</b>
        {% for actor in actor_avg%}
        <div class="row mt-3">
            <div class="col-md-2 text-center">
                <img class="portrait shadow-lg" src="{{ url_start }}{{ actor.imgLink }}" height="35px">
            </div>
            <div class="col-md-10">
                <div class="fw-bold sidebar-title">
                    {{ actor.name }}
                    <div class="year">
                        {{ actor.avg_rating }}
                        &nbsp;&nbsp;({{ actor.nonnull_count }})
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="col-md-2 ms-3 chart-bg">
        <b class="section-heading">WORST ACTORS</b>
        {% for actor in actor_bad_avg%}
        <div class="row mt-3">
            <div class="col-md-2 text-center">
                <img class="portrait shadow-lg" src="{{ url_start }}{{ actor.imgLink }}" height="35px">
            </div>
            <div class="col-md-10">
                <div class="fw-bold sidebar-title">
                    {{ actor.name }}
                    <div class="year">
                        {{ actor.avg_rating }}
                        &nbsp;&nbsp;({{ actor.nonnull_count }})
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
